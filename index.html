<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <script src="script.js" defer></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
    
  </head>

  <body x-data="nameApp()">
    <!-- Name Inputs -->
    <div id="nameInputs">
      <template x-for="nameEntry in nameEntries" :key="nameEntry.id">
        <div class="nameEntry">
          <input type="text" x-model="nameEntry.name" placeholder="Enter a name..." @input="updateExclusionOptions" />
          <button @click="showExclusionModal(nameEntry)">Set Exclusions</button>
          <span class="exclusions">
            <template x-for="exclusion in nameEntry.exclusions" :key="exclusion">
              <span class="chip">
                <span class="chip-label" x-text="exclusion"></span>
                <span class="chip-close" @click="removeExclusion(nameEntry, exclusion)">X</span>
              </span>
            </template>
          </span>
          <button @click="removeNameInput(nameEntry)">Remove</button>
        </div>
      </template>
    </div>

    <!-- Exclusion Modal -->
    <div x-show="exclusionModalVisible" class="modal">
      <h3>Select Exclusions</h3>
      <div>
        <template x-for="name in availableExclusions">
          <div>
            <input type="checkbox" :value="name" x-model="currentExclusions" />
            <label x-text="name"></label>
          </div>
        </template>
      </div>
      <button @click="saveExclusions()">Save</button>
    </div>

    <button @click="addNameInput()">Add Another Name</button>
    <button @click="assign()">Assign</button>

    <p id="output" x-html="output"></p>
  </body>
</html>
